#include "ws2812b.h"

static const char *TAG = "ws2812b";

#define RMT_TX_CHANNEL RMT_CHANNEL_0

#define EXAMPLE_CHASE_SPEED_MS (10)

led_strip_t * ws2812b_init()
{
    rmt_config_t config = RMT_DEFAULT_CONFIG_TX(18, RMT_TX_CHANNEL);
    // set counter clock to 40MHz
    config.clk_div = 2;
    ESP_ERROR_CHECK(rmt_config(&config));
    ESP_ERROR_CHECK(rmt_driver_install(config.channel, 0, 0));
    led_strip_config_t strip_config = LED_STRIP_DEFAULT_CONFIG(8, (led_strip_dev_t)config.channel);
    led_strip_t *strip = led_strip_new_rmt_ws2812(&strip_config);
    if (!strip) {
        ESP_LOGE(TAG, "install WS2812 driver failed");
    }
    ESP_ERROR_CHECK(strip->clear(strip, 100));
    return strip;
}

void ws2812b_set_pixel(led_strip_t *strip, uint32_t index, uint32_t color)
{
    ws2812b_luminance(strip, index, color, 0.5);
}

void ws2812b_luminance(led_strip_t *strip, uint32_t index, uint32_t color, float luminance)
{
    uint32_t red   = (color >> 16 & 0xFF) * luminance;
    uint32_t green = (color >> 8 & 0xFF) * luminance;
    uint32_t blue  = (color & 0xFF) * luminance;
    ESP_ERROR_CHECK(strip->set_pixel(strip, index, red, green, blue));
}

unsigned int color_array[] = {
    RED,
    CYAN,
    BLUE,
    DARKBLUE,
    LIGHTBLUE,
    ORANGE,
    PURPLE,
    BROWN,
    YELLOW,
    LIME,
    MAGENTA,
    OLIVE,
    BLACK,
    NIGHT,
    GUNMETAL,
    MIDNIGHT,
    CHARCOAL,
    DARK_SLATE_GREY,
    OIL,
    BLACK_CAT,
    IRIDIUM,
    BLACK_EEL,
    BLACK_COW,
    GRAY_WOLF,
    VAMPIRE_GRAY,
    GRAY_DOLPHIN,
    CARBON_GRAY,
    ASH_GRAY,
    CLOUDY_GRAY,
    SMOKEY_GRAY,
    GRAY,
    GRANITE,
    BATTLESHIP_GRAY,
    GRAY_CLOUD,
    GRAY_GOOSE,
    PLATINUM,
    METALLIC_SILVER,
    BLUE_GRAY,
    LIGHT_SLATE_GRAY,
    SLATE_GRAY,
    JET_GRAY,
    MIST_BLUE,
    MARBLE_BLUE,
    STEEL_BLUE,
    BLUE_JAY,
    DARK_SLATE_BLUE,
    MIDNIGHT_BLUE,
    NAVY_BLUE,
    BLUE_WHALE,
    LAPIS_BLUE,
    CORNFLOWER_BLUE,
    EARTH_BLUE,
    COBALT_BLUE,
    BLUEBERRY_BLUE,
    SAPPHIRE_BLUE,
    BLUE_EYES,
    ROYAL_BLUE,
    BLUE_ORCHID,
    BLUE_LOTUS,
    LIGHT_SLATE_BLUE,
    SLATE_BLUE,
    GLACIAL_BLUE_ICE,
    SILK_BLUE,
    BLUE_IVY,
    BLUE_KOI,
    COLUMBIA_BLUE,
    BABY_BLUE,
    LIGHT_STEEL_BLUE,
    OCEAN_BLUE,
    BLUE_RIBBON,
    BLUE_DRESS,
    DODGER_BLUE,
    SKY_BLUE,
    BUTTERFLY_BLUE,
    ICEBERG,
    CRYSTAL_BLUE,
    DEEP_SKY_BLUE,
    DENIM_BLUE,
    LIGHT_SKY_BLUE,
    DAY_SKY_BLUE,
    JEANS_BLUE,
    BLUE_ANGEL,
    PASTEL_BLUE,
    SEA_BLUE,
    POWDER_BLUE,
    CORAL_BLUE,
    LIGHT_BLUE,
    ROBIN_EGG_BLUE,
    PALE_BLUE_LILY,
    LIGHT_CYAN,
    WATER,
    ALICEBLUE,
    AZURE,
    LIGHT_SLATE,
    LIGHT_AQUAMARINE,
    ELECTRIC_BLUE,
    AQUAMARINE,
    CYAN_OR_AQUA,
    TRON_BLUE,
    BLUE_ZIRCON,
    BLUE_LAGOON,
    CELESTE,
    BLUE_DIAMOND,
    TIFFANY_BLUE,
    CYAN_OPAQUE,
    BLUE_HOSTA,
    NORTHERN_LIGHTS_BLUE,
    MEDIUM_TURQUOISE,
    TURQUOISE,
    JELLYFISH,
    MACAW_BLUE_GREEN,
    LIGHT_SEA_GREEN,
    DARK_TURQUOISE,
    SEA_TURTLE_GREEN,
    MEDIUM_AQUAMARINE,
    GREENISH_BLUE,
    GRAYISH_TURQUOISE,
    BEETLE_GREEN,
    TEAL,
    SEA_GREEN,
    CAMOUFLAGE_GREEN,
    SAGE_GREEN,
    HAZEL_GREEN,
    VENOM_GREEN,
    FERN_GREEN,
    DARK_FOREST_GREEN,
    MEDIUM_SEA_GREEN,
    MEDIUM_FOREST_GREEN,
    SEAWEED_GREEN,
    PINE_GREEN,
    JUNGLE_GREEN,
    SHAMROCK_GREEN,
    MEDIUM_SPRING_GREEN,
    FOREST_GREEN,
    GREEN_ONION,
    SPRING_GREEN,
    LIME_GREEN,
    CLOVER_GREEN,
    GREEN_SNAKE,
    ALIEN_GREEN,
    GREEN_APPLE,
    YELLOW_GREEN,
    KELLY_GREEN,
    ZOMBIE_GREEN,
    FROG_GREEN,
    GREEN_PEAS,
    DOLLAR_BILL_GREEN,
    DARK_SEA_GREEN,
    IGUANA_GREEN,
    AVOCADO_GREEN,
    PISTACHIO_GREEN,
    SALAD_GREEN,
    HUMMINGBIRD_GREEN,
    NEBULA_GREEN,
    STOPLIGHT_GO_GREEN,
    ALGAE_GREEN,
    JADE_GREEN,
    GREEN,
    EMERALD_GREEN,
    LAWN_GREEN,
    CHARTREUSE,
    DRAGON_GREEN,
    MINT_GREEN,
    GREEN_THUMB,
    LIGHT_JADE,
    TEA_GREEN,
    GREEN_YELLOW,
    SLIME_GREEN,
    GOLDENROD,
    HARVEST_GOLD,
    SUN_YELLOW,
    YELLOW,
    CORN_YELLOW,
    PARCHMENT,
    CREAM,
    LEMON_CHIFFON,
    CORNSILK,
    BEIGE,
    BLONDE,
    ANTIQUEWHITE,
    CHAMPAGNE,
    BLANCHEDALMOND,
    VANILLA,
    TAN_BROWN,
    PEACH,
    MUSTARD,
    RUBBER_DUCKY_YELLOW,
    BRIGHT_GOLD,
    GOLDEN_BROWN,
    MACARONI_AND_CHEESE,
    SAFFRON,
    BEER,
    CANTALOUPE,
    BEE_YELLOW,
    BROWN_SUGAR,
    BURLYWOOD,
    DEEP_PEACH,
    GINGER_BROWN,
    SCHOOL_BUS_YELLOW,
    SANDY_BROWN,
    FALL_LEAF_BROWN,
    ORANGE_GOLD,
    SAND,
    COOKIE_BROWN,
    CARAMEL,
    BRASS,
    KHAKI,
    CAMEL_BROWN,
    BRONZE,
    TIGER_ORANGE,
    CINNAMON,
    BULLET_SHELL,
    DARK_GOLDENROD,
    COPPER,
    WOOD,
    OAK_BROWN,
    MOCCASIN,
    ARMY_BROWN,
    SANDSTONE,
    MOCHA,
    TAUPE,
    COFFEE,
    BROWN_BEAR,
    RED_DIRT,
    SEPIA,
    ORANGE_SALMON,
    RUST,
    RED_FOX,
    CHOCOLATE,
    SEDONA,
    PAPAYA_ORANGE,
    HALLOWEEN_ORANGE,
    PUMPKIN_ORANGE,
    CONSTRUCTION_CONE_ORANGE,
    SUNRISE_ORANGE,
    MANGO_ORANGE,
    DARK_ORANGE,
    CORAL,
    BASKET_BALL_ORANGE,
    LIGHT_SALMON,
    TANGERINE,
    DARK_SALMON,
    LIGHT_CORAL,
    BEAN_RED,
    VALENTINE_RED,
    SHOCKING_ORANGE,
    RED,
    SCARLET,
    RUBY_RED,
    FERRARI_RED,
    FIRE_ENGINE_RED,
    LAVA_RED,
    LOVE_RED,
    GRAPEFRUIT,
    CHESTNUT_RED,
    CHERRY_RED,
    MAHOGANY,
    CHILLI_PEPPER,
    CRANBERRY,
    RED_WINE,
    BURGUNDY,
    CHESTNUT,
    BLOOD_RED,
    SIENNA,
    SANGRIA,
    FIREBRICK,
    MAROON,
    PLUM_PIE,
    VELVET_MAROON,
    PLUM_VELVET,
    ROSY_FINCH,
    PUCE,
    DULL_PURPLE,
    ROSY_BROWN,
    KHAKI_ROSE,
    PINK_BOW,
    LIPSTICK_PINK,
    ROSE,
    DESERT_SAND,
    PIG_PINK,
    COTTON_CANDY,
    PINK_BUBBLEGUM,
    MISTY_ROSE,
    PINK,
    LIGHT_PINK,
    FLAMINGO_PINK,
    PINK_ROSE,
    PINK_DAISY,
    CADILLAC_PINK,
    BLUSH_RED,
    HOT_PINK,
    WATERMELON_PINK,
    VIOLET_RED,
    DEEP_PINK,
    PINK_CUPCAKE,
    PINK_LEMONADE,
    NEON_PINK,
    MAGENTA,
    DIMORPHOTHECA_MAGENTA,
    BRIGHT_NEON_PINK,
    PALE_VIOLET_RED,
    TULIP_PINK,
    MEDIUM_VIOLET_RED,
    ROGUE_PINK,
    BURNT_PINK,
    BASHFUL_PINK,
    CARNATION_PINK,
    PLUM,
    VIOLA_PURPLE,
    PURPLE_IRIS,
    PLUM_PURPLE,
    INDIGO,
    PURPLE_MONSTER,
    PURPLE_HAZE,
    EGGPLANT,
    GRAPE,
    PURPLE_JAM,
    DARK_ORCHID,
    PURPLE_FLOWER,
    MEDIUM_ORCHID,
    PURPLE_AMETHYST,
    DARK_VIOLET,
    VIOLET,
    PURPLE_SAGE_BUSH,
    LOVELY_PURPLE,
    AZTECH_PURPLE,
    MEDIUM_PURPLE,
    JASMINE_PURPLE,
    PURPLE_DAFFODIL,
    TYRIAN_PURPLE,
    CROCUS_PURPLE,
    PURPLE_MIMOSA,
    HELIOTROPE_PURPLE,
    CRIMSON,
    PURPLE_DRAGON,
    LILAC,
    BLUSH_PINK,
    MAUVE,
    WISTERIA_PURPLE,
    BLOSSOM_PINK,
    THISTLE,
    PERIWINKLE,
    LAVENDER_PINOCCHIO,
    LAVENDER_BLUE,
    PEARL,
    SEASHELL,
    MILK_WHITE,
    White,
};
